<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Monot by monochrome.</title>
    <link rel="stylesheet" href="./style/navigation.css">
    <link rel="stylesheet" href="./style/navigation-mac.css">

    <script>
if ("paintWorklet" in CSS) {
  const workletCode = `
    const drawSquircle=(ctx,geom,radii,smooth,lineWidth,color)=>{const defaultFill=color;const lineWidthOffset=lineWidth/2;ctx.beginPath();ctx.lineTo(radii[0],lineWidthOffset);ctx.lineTo(geom.width-radii[1],lineWidthOffset);ctx.bezierCurveTo(geom.width-radii[1]/smooth,lineWidthOffset,geom.width-lineWidthOffset,radii[1]/smooth,geom.width-lineWidthOffset,radii[1]);ctx.lineTo(geom.width-lineWidthOffset,geom.height-radii[2]);ctx.bezierCurveTo(geom.width-lineWidthOffset,geom.height-radii[2]/smooth,geom.width-radii[2]/smooth,geom.height-lineWidthOffset,geom.width-radii[2],geom.height-lineWidthOffset);ctx.lineTo(radii[3],geom.height-lineWidthOffset);ctx.bezierCurveTo(radii[3]/smooth,geom.height-lineWidthOffset,lineWidthOffset,geom.height-radii[3]/smooth,lineWidthOffset,geom.height-radii[3]);ctx.lineTo(lineWidthOffset,radii[0]);ctx.bezierCurveTo(lineWidthOffset,radii[0]/smooth,radii[0]/smooth,lineWidthOffset,radii[0],lineWidthOffset);ctx.closePath();if(lineWidth){ctx.strokeStyle=defaultFill;ctx.lineWidth=lineWidth;ctx.stroke()}else{ctx.fillStyle=defaultFill;ctx.fill()}};class SquircleClass{static get contextOptions(){return{alpha:true}}static get inputProperties(){return["--squircle-radius","--squircle-radius-top-left","--squircle-radius-top-right","--squircle-radius-bottom-right","--squircle-radius-bottom-left","--squircle-smooth","--squircle-outline","--squircle-fill"]}paint(ctx,geom,properties){const smoothRatio=10;const distanceRatio=1.8;const squircleSmooth=parseFloat(properties.get("--squircle-smooth")*smoothRatio);const individualRadiiProps=SquircleClass.inputProperties.slice(1,5);let squircleRadii=individualRadiiProps.map(prop=>{const value=properties.get(prop);return value?parseInt(value,10)*distanceRatio:NaN});let shorthand_R;if(squircleRadii.some(isNaN)){const radiusRegex=/([0-9]+[a-z%]*)/g;const radius_shorthand=properties.get("--squircle-radius").toString();const matches=radius_shorthand.match(radiusRegex);if(matches){shorthand_R=matches.map(val=>parseInt(val,10)*distanceRatio);while(shorthand_R.length<4){if(shorthand_R.length===1){shorthand_R.push(shorthand_R[0])}else if(shorthand_R.length===2){shorthand_R=[shorthand_R[0],shorthand_R[1],shorthand_R[0],shorthand_R[1]]}else if(shorthand_R.length===3){shorthand_R=[shorthand_R[0],shorthand_R[1],shorthand_R[2],shorthand_R[1]]}}}else{const defaultRadius=squircleRadii.every(isNaN)?8*distanceRatio:0;shorthand_R=[defaultRadius,defaultRadius,defaultRadius,defaultRadius]}}squircleRadii=squircleRadii.map((val,i)=>isNaN(val)?shorthand_R[i]:val);const squrcleOutline=parseFloat(properties.get("--squircle-outline"),10);const squrcleColor=properties.get("--squircle-fill").toString();const isSmooth=()=>{if(typeof properties.get("--squircle-smooth")[0]!=="undefined"){if(squircleSmooth===0){return 1}return squircleSmooth}else{return 10}};const isOutline=()=>{if(squrcleOutline){return squrcleOutline}else{return 0}};const isColor=()=>{if(squrcleColor){return squrcleColor}else{return"#f45"}};const maxRadius=Math.max(...squircleRadii);if(maxRadius<geom.width/2&&maxRadius<geom.height/2){drawSquircle(ctx,geom,squircleRadii,isSmooth(),isOutline(),isColor())}else{const minRadius=Math.min(geom.width/2,geom.height/2);drawSquircle(ctx,geom,squircleRadii.map(()=>minRadius),isSmooth(),isOutline(),isColor())}}}if(typeof registerPaint!=="undefined"){registerPaint("squircle",SquircleClass)}
  `;
  const blob = new Blob([workletCode], { type: 'application/javascript' });
  const blobURL = URL.createObjectURL(blob);
  CSS.paintWorklet.addModule(blobURL);
}
</script>


  </head>
  <body class="mac" style="display:flex;align-items:flex-end;align-content:flex-end;flex-direction:column-reverse;">
    <nav>
      <button id="maximize"></button>
<button id="close"></button>


      <a href="javascript:moveBrowser()" title="${go}" id="move"></a>

      <a href="javascript:node.moveToNewTab()" title="Home" id="home">
        <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="40px" fill="var(--text-color)"><path d="M226.67-186.67h140V-400q0-14.17 9.58-23.75t23.75-9.58h160q14.17 0 23.75 9.58t9.58 23.75v213.33h140v-380L480-756.67l-253.33 190v380Zm-66.67 0v-380q0-15.83 7.08-30 7.09-14.16 19.59-23.33L440-810q17.45-13.33 39.89-13.33T520-810l253.33 190q12.5 9.17 19.59 23.33 7.08 14.17 7.08 30v380q0 27.5-19.58 47.09Q760.83-120 733.33-120H560q-14.17 0-23.75-9.58-9.58-9.59-9.58-23.75v-213.34h-93.34v213.34q0 14.16-9.58 23.75Q414.17-120 400-120H226.67q-27.5 0-47.09-19.58Q160-159.17 160-186.67ZM480-472Z"/></svg>
      </a>
      <a href="javascript:node.reloadBrowser()" title="${reload}" id="reload">
        <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="40px" fill="var(--text-color)"><path d="M480-160q-133.33 0-226.67-93.33Q160-346.67 160-480q0-133.33 93.33-226.67Q346.67-800 480-800q79.67 0 143.33 32.5 63.67 32.5 110 90.17v-89.34q0-14.33 9.5-23.83 9.5-9.5 23.84-9.5 14.33 0 23.83 9.5 9.5 9.5 9.5 23.83v196q0 14.34-9.5 23.84t-23.83 9.5h-196q-14.34 0-23.84-9.5t-9.5-23.84q0-14.33 9.5-23.83 9.5-9.5 23.84-9.5h134.66q-36-58.67-93.83-94T480-733.33q-106 0-179.67 73.66Q226.67-586 226.67-480q0 106 73.66 179.67Q374-226.67 480-226.67q72.67 0 134.83-37.83 62.17-37.83 93.84-101.83 6-12 18.5-17.5t24.83-.5q13.33 5 18.33 18 5 13-1 25.66Q729.67-258 652-209q-77.67 49-172 49Z"/></svg>
      </a>
      <a href="javascript:node.backBrowser()" title="${go_back}" id="prev">
        <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="40px" fill="var(--text-color)"><path d="M287-446.67 503.67-230q10 10 9.83 23.33-.17 13.34-10.17 23.34-10 9.66-23.33 9.83-13.33.17-23.33-9.83L183.33-456.67q-5.33-5.33-7.5-11-2.16-5.66-2.16-12.33t2.16-12.33q2.17-5.67 7.5-11l273.34-273.34q9.66-9.66 23.16-9.66t23.5 9.66q10 10 10 23.5t-10 23.5L287-513.33h479.67q14.33 0 23.83 9.5 9.5 9.5 9.5 23.83 0 14.33-9.5 23.83-9.5 9.5-23.83 9.5H287Z"/></svg>
      </a>
      <a href="javascript:node.goBrowser()" title="${go_forward}" id="next">
        <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="40px" fill="var(--text-color)"><path d="M673-446.67H193.33q-14.33 0-23.83-9.5-9.5-9.5-9.5-23.83 0-14.33 9.5-23.83 9.5-9.5 23.83-9.5H673L456.33-730q-10-10-9.83-23.33.17-13.34 10.17-23.34 10-9.66 23.33-9.83 13.33-.17 23.33 9.83l273.34 273.34q5.33 5.33 7.5 11 2.16 5.66 2.16 12.33t-2.16 12.33q-2.17 5.67-7.5 11L503.33-183.33q-9.66 9.66-23.16 9.66t-23.5-9.66q-10-10-10-23.5t10-23.5L673-446.67Z"/></svg>
      </a>
      <input type="text" placeholder="${enter_url_word}" id="textbox" onkeypress="textKey(arguments[0])" onblur="node.suggestClose()">
      <a href="javascript:node.showMenu()" title="${view_menu}" id="menu" class="window">
        <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="40px" fill="var(--text-color)"><path d="M710-143.33q-63 0-106.5-43.5T560-293.33q0-63 43.5-106.5t106.5-43.5q63 0 106.5 43.5t43.5 106.5q0 63-43.5 106.5T710-143.33Zm0-66.67q35 0 59.17-24.17 24.16-24.16 24.16-59.16t-24.16-59.17Q745-376.67 710-376.67t-59.17 24.17q-24.16 24.17-24.16 59.17t24.16 59.16Q675-210 710-210Zm-263.33-50h-280q-14.17 0-23.75-9.62-9.59-9.61-9.59-23.83 0-14.22 9.59-23.72 9.58-9.5 23.75-9.5h280q14.16 0 23.75 9.62 9.58 9.62 9.58 23.83 0 14.22-9.58 23.72-9.59 9.5-23.75 9.5ZM250-516.67q-63 0-106.5-43.5T100-666.67q0-63 43.5-106.5t106.5-43.5q63 0 106.5 43.5t43.5 106.5q0 63-43.5 106.5T250-516.67Zm0-66.66q35 0 59.17-24.17 24.16-24.17 24.16-59.17t-24.16-59.16Q285-750 250-750t-59.17 24.17q-24.16 24.16-24.16 59.16t24.16 59.17Q215-583.33 250-583.33Zm543.33-50h-280q-14.16 0-23.75-9.62-9.58-9.62-9.58-23.83 0-14.22 9.58-23.72 9.59-9.5 23.75-9.5h280q14.17 0 23.75 9.62 9.59 9.61 9.59 23.83 0 14.22-9.59 23.72-9.58 9.5-23.75 9.5Zm-83.33 340ZM250-666.67Z"/></svg>
      </a>
    </nav>
    <tab-el>
      <div>
      </div>
      <a href="javascript:node.newtab()" id="newtab"></a>
    </tab-el>
    <yomikomi-bar></yomikomi-bar>
    <script src="script/moveBrowser.js"></script>
    <script>
      console.log('window.node:', window.node);
    </script>
    <script src="script/event.js"></script>
    <script>
      document.addEventListener('dblclick', (e) => {
        if (
          e.target.parentElement.className === 'mac '
        ) {
          node.maxMin();
        } else if (
          document.body.className === 'mac thin' &&
          (
            e.target.parentElement === document.body ||
            e.target === document.getElementsByTagName('div')[0]
          )
        ) {
          node.maxMin();
        }
      });
    </script>


<script>
let isMaximized = false;
let originalWidth = window.outerWidth;
let originalHeight = window.outerHeight;
let originalX = window.screenX;
let originalY = window.screenY;

// OS判定（簡易）
const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;

// イージング関数
function easeInOutCubic(t) {
    return t < 0.5
        ? 4 * t * t * t
        : 1 - Math.pow(-2 * t + 2, 3) / 2;
}

// アニメーション関数
function animateWindow(targetX, targetY, targetWidth, targetHeight, duration = 400) {
    const startTime = performance.now();
    const startX = window.screenX;
    const startY = window.screenY;
    const startWidth = window.outerWidth;
    const startHeight = window.outerHeight;

    function step(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const eased = easeInOutCubic(progress);

        const newX = startX + (targetX - startX) * eased;
        const newY = startY + (targetY - startY) * eased;
        const newWidth = startWidth + (targetWidth - startWidth) * eased;
        const newHeight = startHeight + (targetHeight - startHeight) * eased;

        window.resizeTo(newWidth, newHeight);
        window.moveTo(newX, newY);

        if (progress < 1) requestAnimationFrame(step);
    }

    requestAnimationFrame(step);
}

document.getElementById('maximize').addEventListener('click', () => {
    if (isMac) {
        // macOSの場合はフルスクリーンAPI
        if (!isMaximized) {
            if (document.fullscreenElement === null) {
                document.documentElement.requestFullscreen();
            }
            isMaximized = true;
        } else {
            if (document.fullscreenElement !== null) {
                document.exitFullscreen();
            }
            isMaximized = false;
        }
    } else {
        // 通常アニメーション
        if (!isMaximized) {
            originalWidth = window.outerWidth;
            originalHeight = window.outerHeight;
            originalX = window.screenX;
            originalY = window.screenY;
            animateWindow(0, 0, screen.availWidth, screen.availHeight);
            isMaximized = true;
        } else {
            animateWindow(originalX, originalY, originalWidth, originalHeight);
            isMaximized = false;
        }
    }
});

// 閉じるボタン
document.getElementById('close').addEventListener('click', () => {
    window.close();
});
</script>
    <script src="../../proprietary/renderer/lang.js"></script>
  </body>
</html>
